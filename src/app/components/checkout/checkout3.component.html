<hr />
<form [formGroup]="checkoutFormGroup" action="" (ngSubmit)="onSubmit()">
  <div class="container">
    <div class="left-side">
      <!-- Customer Area -->
      <div formGroupName="customer">
        <h3>Customer</h3>
        <label>First Name:</label>
        <input formControlName="firstName" type="text" required />
        <div
          *ngIf="firstName?.invalid && (firstName?.dirty || firstName?.touched)"
          class="alert alert-danger my-5"
        >
          <div
            *ngIf="firstName?.errors?.['required'] || firstName?.errors?.['minlength'] || firstName?.errors?.['notOnlyWhitespace']"
          >
            First Name is required and must be at least 2 characters long
          </div>
        </div>
        <div>
          <label>Last Name:</label>
          <input
            type="text"
            formControlName="lastName"
            id="lastName"
            required
          />
          <div
            *ngIf="lastName?.invalid && (lastName?.dirty || lastName?.touched)"
            class="alert alert-danger my-5"
          >
            <div
              *ngIf="lastName?.errors?.['required'] || lastName?.errors?.['minlength'] || lastName?.errors?.['notOnlyWhitespace']"
            >
              Last Name is required and must be at least 2 characters long
            </div>
          </div>
        </div>
        <div>
          <label>Email:</label>
          <input type="text" formControlName="email" id="email" required />
          <div
            *ngIf="email?.invalid && (email?.dirty || email?.touched)"
            class="alert alert-danger my-5"
          >
            <div
              *ngIf="email?.errors?.['required'] || email?.errors?.['pattern']"
            >
              Email is required and must be a vaild format
            </div>
          </div>
        </div>
      </div>
      <!-- Customer Area -->
      <!-- Shipping Address -->
      <div formGroupName="shippingAddress">
        <div>
          <h3>Shipping Address</h3>
          <label>Country:</label>
          <select
            formControlName="country"
            id=""
            (change)="getStates('shippingAddress')"
          >
            <option *ngFor="let country of countries" [ngValue]="country">
              {{ country.name }}
            </option>
          </select>
          <div
            *ngIf="
              shippingAddressCountry?.invalid &&
              (shippingAddressCountry?.dirty || shippingAddressCountry?.touched)
            "
            class="alert alert-danger my-5"
          >
            <div *ngIf="shippingAddressCountry?.errors?.['required']">
              Country is required
            </div>
          </div>
        </div>
        <div>
          <label>Street:</label>
          <input type="text" formControlName="street" id="firstName" required />
          <div
            *ngIf="
              shippingAddressStreet?.invalid &&
              (shippingAddressStreet?.dirty || shippingAddressStreet?.touched)
            "
            class="alert alert-danger my-5"
          >
            <div
              *ngIf="shippingAddressStreet?.errors?.['required'] || ['minlength'] || ['notOnlyWhitespace']"
            >
              Street is required
            </div>
          </div>
        </div>
        <div>
          <label>City:</label>
          <input type="text" formControlName="city" id="firstName" required />
          <div
            *ngIf="
              shippingAddressCity?.invalid &&
              (shippingAddressCity?.dirty || shippingAddressCity?.touched)
            "
            class="alert alert-danger my-5"
          >
            <div
              *ngIf="shippingAddressCity?.errors?.['required'] || ['minlength'] || ['notOnlyWhitespace']"
            >
              City is required
            </div>
            
          </div>
        </div>
        <div>
        </div>
        <div>
          <label>State</label>
          <select formControlName="state" id="">
            <option
              *ngFor="let state of shippingAddressStates"
              [ngValue]="state"
            >
              {{ state.name }}
            </option>
          </select>
          <div
          *ngIf="
            shippingAddressState?.invalid &&
            (shippingAddressState?.dirty || shippingAddressState?.touched)
          "
          class="alert alert-danger my-5"
        >
          <div
            *ngIf="shippingAddressState?.errors?.['required'] || ['minlength'] || ['notOnlyWhitespace']"
          >
            State is required
          </div>
        </div>
        </div>
        <div>
          <label>Zip-Code:</label>
          <input
            type="text"
            formControlName="zipCode"
            id="firstName"
            required
          />
          <div
            *ngIf="
              shippingAddressZipCode?.invalid &&
              (shippingAddressZipCode?.dirty || shippingAddressZipCode?.touched)
            "
            class="alert alert-danger my-5"
          >
            <div
              *ngIf="shippingAddressZipCode?.errors?.['required'] || ['minlength'] || ['notOnlyWhitespace']"
            >
              Zip-Code is required
            </div>
          </div>
        </div>
        <!-- Coppy Billing Address to Shipping Address -->
        <div>
          <label>
            <input
              type="checkbox"
              id="flexCheckDefault"
              (change)="copyShippingAddressToBillingAddress($event)"
            />
            <span>Billing Address same as Shipping Address</span>
          </label>
        </div>
        <!-- Coppy Billing Address to Shipping Address -->
        <!-- Billing Address -->
        <div formGroupName="billingAddress">
          <h3>Billing Address</h3>
          <div>
            <label>Country:</label>
            <select
              formControlName="country"
              id=""
              (change)="getStates('billingAddress')"
            >
              <option *ngFor="let country of countries" [ngValue]="country">
                {{ country.name }}
              </option>
            </select>
          </div>
          <div>
            <label>Street:</label>
            <input
              type="text"
              formControlName="street"
              id="firstName"
              required
            />
          </div>
          <div>
            <label>City:</label>
            <input type="text" formControlName="city" id="firstName" required />
          </div>
          <div>
            <label>States</label>
            <select formControlName="state">
              <option
                *ngFor="let state of billingAddressStates"
                [ngValue]="state"
              >
                {{ state.name }}
              </option>
            </select>
          </div>
          <div>
            <label>Zip-Code</label>
              <input
                type="text"
                formControlName="zipCode"
                id="firstName"
                required
              />
          </div>
        </div>
        <!-- Billing Address -->
      </div>
      <!-- Shipping Address -->
    </div>
    <!-- Order Summary -->
    <div class="right-side" formGroupName="creditCard">
      <div>
        <h3>Order Summary</h3>
        <div>
          <p>
            Total Price: <strong>{{ totalPrice | currency : "USD" }}</strong>
          </p>
          <p>
            Total Quantity: <strong>{{ totalQuantity }}</strong>
          </p>
          <p>Shipping: <strong>FREE</strong></p>
          <p>
            Tax: <strong>{{ totalPrice * 0.1 | currency : "USD" }}</strong>
          </p>
          <p>
            Grand Total:
            <strong>{{
              totalPrice + totalPrice * 0.1 | currency : "USD"
            }}</strong>
          </p>
        </div>
      </div>
      <!-- Order Summary -->
      <!-- Payment -->
      <h3>Payment</h3>
      <label for="creditCardType">Credit Card Type:</label>
      <select formControlName="cardType">
        <option value="Visa">Visa</option>
        <option value="MasterCard">MasterCard</option>
      </select>
      <div
        *ngIf="
          creditCardType?.invalid &&
          (creditCardType?.dirty || creditCardType?.touched)
        "
        class="alert alert-danger my-5"
      >
        <div *ngIf="creditCardType?.errors?.['required']">
          Credit Card Type is required
        </div>
      </div>
      <div>
        <label>Card Holder Name</label>
        <input type="text" formControlName="nameOnCard" />
        <div
          *ngIf="
            creditCardNameOnCard?.invalid &&
            (creditCardNameOnCard?.dirty || creditCardNameOnCard?.touched)
          "
          class="alert alert-danger my-5"
        >
          <div
            *ngIf="creditCardNameOnCard?.errors?.['required'] || ['minlength'] || ['notOnlyWhitespace']"
          >
            Card Holder Name is required
          </div>
        </div>
      </div>
      <div>
        <label>Credit Card Number</label>
        <input type="text" formControlName="cardNumber" />
        <div
          *ngIf="
            creditCardcardNumber?.invalid &&
            (creditCardcardNumber?.dirty || creditCardcardNumber?.touched)
          "
          class="alert alert-danger my-5"
        >
          <div
            *ngIf="creditCardNameOnCard?.errors?.['required'] || ['minlength'] || ['notOnlyWhitespace']"
          >
            Card Number is required
          </div>
        </div>
      </div>
      <div>
        <label>Expiration Month:</label>
        <select formControlName="expirationMonth">
          <option *ngFor="let Month of creditCardMonths">
            {{ Month }}
          </option>
        </select>
      </div>
      <div>
        <label>Expiration Year</label>
        <select
          formControlName="expirationYear"
          (change)="handleMonthsAndYears()"
        >
          <option *ngFor="let Year of creditCardYears">
            {{ Year }}
          </option>
        </select>
      </div>
      <div>
        <label>Security Code</label>
        <input type="text" formControlName="securityCode" />
        <div
          *ngIf="
            creditCardSecurityCode?.invalid &&
            (creditCardSecurityCode?.dirty || creditCardSecurityCode?.touched)
          "
          class="alert alert-danger my-5"
        >
          <div
            *ngIf="creditCardSecurityCode?.errors?.['required'] || ['minlength'] || ['notOnlyWhitespace']"
          >
            Security Code and Expiration Month/Year are required
          </div>
        </div>
      </div>
      <!-- Payment -->
    </div>
    <!-- right side div -->
  </div>
  <button type="submit" class="btn btn-submit">Submit</button>
</form>