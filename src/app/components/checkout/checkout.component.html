<div class="my-5 text-center">
    <form [formGroup]="checkoutFormGroup" action="" class="" (ngSubmit)="onSubmit()">
        
        <!-- Customer -->
        <div formGroupName="customer" class="border">
            <h3>Customer</h3>
            <div style="width: 30%; margin-left: 30%;" class="text-center my-5">
                <div class="row my-2">
                    <div class="col-md-3"><label>First Name</label></div>
                    <div class="col-md-9"><input type="text" formControlName="firstName" class="form-control" id="firstName" required>
                        <div *ngIf="firstName?.invalid && (firstName?.dirty || firstName?.touched)" class="alert alert-danger my-5">
                            <div *ngIf="firstName?.errors?.['required'] || firstName?.errors?.['minlength'] || firstName?.errors?.['notOnlyWhitespace']">First Name is required and must be at least 2 characters long</div>

                        </div>
                    </div>
                </div>
                <div class="row my-2">
                    <div class="col-md-3"><label>Last Name</label></div>
                    <div class="col-md-9"><input type="text" formControlName="lastName" class="form-control" id="firstName" required>

                        <div *ngIf="lastName?.invalid && (lastName?.dirty || lastName?.touched)" class="alert alert-danger my-5">
                            <div *ngIf="lastName?.errors?.['required'] || lastName?.errors?.['minlength'] || lastName?.errors?.['notOnlyWhitespace']">Last Name is required and must be at least 2 characters long</div>
                            <!-- <div *ngIf="lastName?.errors?.['minlength']">Last Name must be at least 2 characters long</div> -->
                        </div>
                    </div>
                </div>
                <div class="row my-2">
                    <div class="col-md-3"><label>Email</label></div>
                    <div class="col-md-9"><input type="text" formControlName="email" class="form-control" id="firstName" required>
                        <div *ngIf="email?.invalid && (email?.dirty || email?.touched)" class="alert alert-danger my-5">
                            <div *ngIf="email?.errors?.['required'] || email?.errors?.['pattern']">Email is required and must be a vaild format</div>
                        </div>
                    </div>
                </div>
            </div> 
        </div>
        <!-- Customer -->

        <!-- Shipping Address -->
        <div formGroupName="shippingAddress">
            <h3>Shipping Address</h3>
            <div style="width: 30%; margin-left: 30%;" class="text-center my-5">
                <div class="row my-2">
                    <div class="col-md-3"><label>Country</label></div>
                    <select formControlName="country" id="" (change)="getStates('shippingAddress')">
                        <option *ngFor="let country of countries" [ngValue]="country">
                            {{country.name}}
                        </option>
                    </select>
                    <div *ngIf="shippingAddressCountry?.invalid && (shippingAddressCountry?.dirty || shippingAddressCountry?.touched)" class="alert alert-danger my-5">
                        <div *ngIf="shippingAddressCountry?.errors?.['required']">Country is required</div>
                    </div>
                </div>
                <div class="row my-2">
                    <div class="col-md-3"><label>Street</label></div>
                    <div class="col-md-9"><input type="text" formControlName="street" class="form-control" id="firstName" required></div>
                    <div *ngIf="shippingAddressStreet?.invalid && (shippingAddressStreet?.dirty || shippingAddressStreet?.touched)" class="alert alert-danger my-5">
                        <div *ngIf="shippingAddressStreet?.errors?.['required']">Street is required</div>
                    </div>
                </div>
                <div class="row my-2">
                    <div class="col-md-3"><label>City</label></div>
                    <div class="col-md-9"><input type="text" formControlName="city" class="form-control" id="firstName" required></div>
                    <div *ngIf="shippingAddressCity?.invalid && (shippingAddressCity?.dirty || shippingAddressCity?.touched)" class="alert alert-danger my-5">
                        <div *ngIf="shippingAddressCity?.errors?.['required']">City is required</div>
                    </div>
                </div>
                <div class="row my-2">
                    <div class="col-md-3"><label>States</label></div>
                    <select formControlName="state" id="">
                        <option *ngFor="let state of shippingAddressStates" [ngValue]="state">
                            {{state.name}}
                        </option>
                    </select>
                    <div *ngIf="shippingAddressState?.invalid && (shippingAddressState?.dirty || shippingAddressState?.touched)" class="alert alert-danger my-5">
                        <div *ngIf="shippingAddressState?.errors?.['required']">State is required</div>
                    </div>
                </div>
                <div class="row my-2">
                    <div class="col-md-3"><label>Zip-Code</label></div>
                    <div class="col-md-9"><input type="text" formControlName="zipCode" class="form-control" id="firstName" required></div>
                    <div *ngIf="shippingAddressZipCode?.invalid && (shippingAddressZipCode?.dirty || shippingAddressZipCode?.touched)" class="alert alert-danger my-5">
                        <div *ngIf="shippingAddressZipCode?.errors?.['required'] || ['minlength'] || ['notOnlyWhitespace']">Zip-Code is required</div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Shipping Address -->

        <!-- Coppy Billing Address to Shipping Address -->
        <div style="width: 30%; margin-left: 30%;" class="text-center my-5">
            <label for="">
                <input type="checkbox" id="flexCheckDefault" (change)="copyShippingAddressToBillingAddress($event)">
                <span class="">Billing Address same as Shipping Address</span>
            </label>
        </div>
        <!-- Coppy Billing Address to Shipping Address -->

        <!-- Billing Address -->
        <div formGroupName="billingAddress">
            <h3>Billing Address</h3>
            <div style="width: 30%; margin-left: 30%;" class="text-center my-5">
                <div class="row my-2">
                    <div class="col-md-3"><label>Country</label></div>
                    <select formControlName="country" id="" (change)="getStates('billingAddress')">
                        <option *ngFor="let country of countries" [ngValue]="country">
                            {{country.name}}
                        </option>
                    </select>
                    
                </div>
                <div class="row my-2">
                    <div class="col-md-3"><label>Street</label></div>
                    <div class="col-md-9"><input type="text" formControlName="street" class="form-control" id="firstName" required></div>
                </div>
                <div class="row my-2">
                    <div class="col-md-3"><label>City</label></div>
                    <div class="col-md-9"><input type="text" formControlName="city" class="form-control" id="firstName" required></div>
                </div>
                <div class="row my-2">
                    <div class="col-md-3"><label>States</label></div>
                    <select formControlName="state">
                        <option *ngFor="let state of billingAddressStates" [ngValue]="state">
                            {{state.name}}
                        </option>
                    </select>
                </div>
                <div class="row my-2">
                    <div class="col-md-3"><label>Zip-Code</label></div>
                    <div class="col-md-9"><input type="text" formControlName="zipCode" class="form-control" id="firstName" required></div>
                </div>
            </div>
        </div>
        <!-- Billing Address -->

        <!-- Credit Card -->

        <div formGroupName="creditCard" style="width: 30%; margin-left: 30%;" class="text-center my-5">
            <h3>Credit Card</h3>
            <div class="text-center my-5">
                <div>
                    <label for="creditCardType">Credit Card Type</label>
                    <select formControlName="creditCardType">
                        <option value="Visa">Visa</option>
                        <option value="MasterCard">MasterCard</option>
                        <option value="American Express">American Express</option>
                        <option value="Discover">Discover</option>
                    </select>
                </div>
                <div>
                    <label>Card Holder Name</label>
                    <input type="text" formControlName="nameOnCard" class="">
                </div>
                <div>
                    <label>Credit Card Number</label>
                    <input type="text" formControlName="cardNumber" class="">
                </div>
                <div>
                    <label>Expiration Month</label>
                    <select formControlName="expirationMonth">
                        <option *ngFor="let Month of creditCardMonths">
                            {{Month}}
                        </option>
                    </select>
                </div>
                <div>
                    <label>Expiration Year</label>
                    <select formControlName="expirationYear" (change)="handleMonthsAndYears()">
                        <option *ngFor="let Year of creditCardYears">
                            {{Year}}
                        </option>

                    </select>
                </div>
                <div>
                    <label>Security Code</label>
                    <input type="text" formControlName="securityCode" class="">
                </div>
            </div>
        </div>


        <!-- Credit Card -->   
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
        <!-- Order Summary -->
        <div>
            <h3>Order Summary</h3>
            <div class="text-center my-5">
                <div>
                    <p>Total Price: {{totalPrice | currency:'USD'}}</p>
                    <p>Total Quantity: {{totalQuantity}}</p>
                    <p>Shipping: FREE</p>
                    <p>Tax: {{totalPrice * 0.1 | currency:'USD'}}</p>
                    <p>Grand Total: {{totalPrice + (totalPrice * 0.1) | currency:'USD'}}</p>
                </div>
            </div>
        <!-- Order Summary -->

</div>